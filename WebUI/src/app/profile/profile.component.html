<div class="background-image">
  <div class="profile-container" *ngIf="profile">
    <div class="profile-details">
      <h2>User Profile</h2>
      <div *ngIf="!isEditing">
        <p><strong>Name:</strong> {{ profile.name }}</p>
        <p><strong>Phone:</strong> {{ profile.phone }}</p>
        <p><strong>Email:</strong> {{ profile.email }}</p>
        <p><strong>Age:</strong> {{ profile.age }}</p>
        <p><strong>Address:</strong> {{ profile.address }}</p>
        <button (click)="toggleEdit()">Edit Profile</button>
        <button (click)="toggleAddSkill()">Add Skills</button>
        <button (click)="toggleAddCertificate()">Add Certificate</button>
      </div>

      <div *ngIf="isEditing" class="edit-form">
        <input [(ngModel)]="profile.name" placeholder="Name" />
        <input [(ngModel)]="profile.phone" placeholder="Phone" />
        <input [(ngModel)]="profile.email" placeholder="Email" />
        <input [(ngModel)]="profile.age" placeholder="Age" />
        <input [(ngModel)]="profile.address" placeholder="Address" />
        <button (click)="updateProfile()">Save Changes</button>
        <button class="cancel" (click)="toggleEdit()">Cancel</button>
      </div>

      <div *ngIf="isAddingSkill" class="add-skill-form">
        <input [(ngModel)]="newSkill" placeholder="Add a skill" />
        <button (click)="onAddSkill()">Add</button>
        <button class="cancel" (click)="toggleAddSkill()">Cancel</button>
      </div>

      <div *ngIf="isAddingCertificate" class="add-certificate-form">
        <input [(ngModel)]="newCertificateName" placeholder="Certificate Name" />
        <input [(ngModel)]="newCertificateIssuer" placeholder="Issuer" />
        <button (click)="onAddCertificate()">Add Certificate</button>
        <button class="cancel" (click)="toggleAddCertificate()">Cancel</button>
      </div>

      <!-- Skills and Certificates Table -->
      <div class="table-container">
        <h3>Skills and Certificates</h3>
        <table class="skills-certificates-table">
          <thead>
            <tr>
              <th>Skills</th>
              <th>Certificates</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let skill of profile.skills; let i = index">
              <td [ngClass]="{'odd-row': i % 2 !== 0}">{{ skill }}</td>
              <td [ngClass]="{'odd-row': i % 2 !== 0}">
                <ng-container *ngIf="profile.certificates && profile.certificates.$values && profile.certificates.$values[i]">
                  {{ profile.certificates.$values[i].name }} - {{ profile.certificates.$values[i].issuer }}
                </ng-container>
              </td>
            </tr>
            <ng-container *ngIf="profile.certificates.$values.length > profile.skills.length">
              <tr *ngFor="let certificate of profile.certificates.$values; let j = index">
                <td [ngClass]="{'odd-row': (j + profile.skills.length) % 2 !== 0}"></td>
                <td [ngClass]="{'odd-row': (j + profile.skills.length) % 2 !== 0}">{{ certificate.name }} - {{ certificate.issuer }}</td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
    <div class="work-experience">
      <app-work-experience></app-work-experience>
    </div>
  </div>
  <div *ngIf="!profile">
    <p>No user data available.</p>
  </div>
</div>
