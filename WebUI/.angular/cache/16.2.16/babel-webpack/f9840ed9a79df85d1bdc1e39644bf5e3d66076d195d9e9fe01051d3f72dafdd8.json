{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ProfileComponent = class ProfileComponent {\n  constructor(profileService, router) {\n    this.profileService = profileService;\n    this.router = router;\n    this.selectedFile = null;\n    this.isEditing = false; // Add this property to track edit mode\n  }\n\n  ngOnInit() {\n    this.fetchProfile();\n  }\n  // Fetch the user profile data from the server\n  fetchProfile() {\n    this.profileService.getProfile().subscribe(data => {\n      this.profile = data;\n    }, error => {\n      console.error('Error fetching profile data', error);\n    });\n  }\n  // Toggle edit mode\n  toggleEdit() {\n    this.isEditing = !this.isEditing;\n  }\n  // Update the profile details\n  updateProfile() {\n    const updatedData = {\n      name: this.profile.name,\n      phone: this.profile.phone,\n      email: this.profile.email,\n      age: this.profile.age,\n      address: this.profile.address // Ensure this field exists in your profile object\n    };\n\n    this.profileService.updateProfile(updatedData).subscribe(response => {\n      console.log('Profile updated successfully', response);\n      this.isEditing = false; // Exit edit mode after successful update\n      this.fetchProfile(); // Refresh the profile data\n    }, error => {\n      console.error('Error updating profile', error);\n      // Optionally, show an error message to the user\n    });\n  }\n  // Open file input for editing the profile picture\n  editProfilePicture() {\n    const fileInput = document.createElement('input');\n    fileInput.type = 'file';\n    fileInput.accept = 'image/*';\n    fileInput.onchange = event => {\n      const target = event.target;\n      if (target.files) {\n        this.selectedFile = target.files[0];\n        this.uploadProfilePicture();\n      }\n    };\n    fileInput.click();\n  }\n  // Upload the selected profile picture\n  uploadProfilePicture() {\n    if (this.selectedFile) {\n      this.profileService.uploadProfilePicture(this.selectedFile).subscribe(response => {\n        console.log('Profile picture uploaded successfully', response);\n        // Fetch updated profile to ensure the new picture URL is reflected\n        this.fetchProfile();\n      }, error => {\n        console.error('Error uploading profile picture', error);\n        // Optionally, show an error message to the user\n      });\n    }\n  }\n  // Navigate to the work experience section\n  navigateToWorkExperience() {\n    this.router.navigate(['/workexperience']);\n  }\n};\nProfileComponent = __decorate([Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.css']\n})], ProfileComponent);","map":{"version":3,"names":["Component","ProfileComponent","constructor","profileService","router","selectedFile","isEditing","ngOnInit","fetchProfile","getProfile","subscribe","data","profile","error","console","toggleEdit","updateProfile","updatedData","name","phone","email","age","address","response","log","editProfilePicture","fileInput","document","createElement","type","accept","onchange","event","target","files","uploadProfilePicture","click","navigateToWorkExperience","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\MyProfile\\WebUI\\WebUI\\src\\app\\profile\\profile.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ProfileService } from '../_services/profile.service';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.component.html',\r\n  styleUrls: ['./profile.component.css']\r\n})\r\nexport class ProfileComponent implements OnInit {\r\n  profile: any;\r\n  selectedFile: File | null = null;\r\n  isEditing: boolean = false; // Add this property to track edit mode\r\n\r\n  constructor(private profileService: ProfileService, private router: Router) { }\r\n\r\n  ngOnInit(): void {\r\n    this.fetchProfile();\r\n  }\r\n\r\n  // Fetch the user profile data from the server\r\n  fetchProfile(): void {\r\n    this.profileService.getProfile().subscribe(\r\n      (data) => {\r\n        this.profile = data;\r\n      },\r\n      (error) => {\r\n        console.error('Error fetching profile data', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  // Toggle edit mode\r\n  toggleEdit() {\r\n    this.isEditing = !this.isEditing;\r\n  }\r\n\r\n  // Update the profile details\r\n  updateProfile() {\r\n    const updatedData = {\r\n      name: this.profile.name,\r\n      phone: this.profile.phone,\r\n      email: this.profile.email,\r\n      age: this.profile.age,\r\n      address: this.profile.address // Ensure this field exists in your profile object\r\n    };\r\n\r\n    this.profileService.updateProfile(updatedData).subscribe(\r\n      response => {\r\n        console.log('Profile updated successfully', response);\r\n        this.isEditing = false; // Exit edit mode after successful update\r\n        this.fetchProfile(); // Refresh the profile data\r\n      },\r\n      error => {\r\n        console.error('Error updating profile', error);\r\n        // Optionally, show an error message to the user\r\n      }\r\n    );\r\n  }\r\n\r\n  // Open file input for editing the profile picture\r\n  editProfilePicture() {\r\n    const fileInput = document.createElement('input');\r\n    fileInput.type = 'file';\r\n    fileInput.accept = 'image/*';\r\n    fileInput.onchange = (event) => {\r\n      const target = event.target as HTMLInputElement;\r\n      if (target.files) {\r\n        this.selectedFile = target.files[0];\r\n        this.uploadProfilePicture();\r\n      }\r\n    };\r\n    fileInput.click();\r\n  }\r\n\r\n  // Upload the selected profile picture\r\n  uploadProfilePicture() {\r\n    if (this.selectedFile) {\r\n      this.profileService.uploadProfilePicture(this.selectedFile).subscribe(\r\n        response => {\r\n          console.log('Profile picture uploaded successfully', response);\r\n          // Fetch updated profile to ensure the new picture URL is reflected\r\n          this.fetchProfile();\r\n        },\r\n        error => {\r\n          console.error('Error uploading profile picture', error);\r\n          // Optionally, show an error message to the user\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  // Navigate to the work experience section\r\n  navigateToWorkExperience() {\r\n    this.router.navigate(['/workexperience']);\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}